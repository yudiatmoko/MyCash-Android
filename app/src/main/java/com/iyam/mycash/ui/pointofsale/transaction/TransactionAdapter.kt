package com.iyam.mycash.ui.pointofsale.transactionimport android.content.Contextimport android.view.LayoutInflaterimport android.view.ViewGroupimport androidx.core.view.isVisibleimport androidx.recyclerview.widget.AsyncListDifferimport androidx.recyclerview.widget.DiffUtilimport androidx.recyclerview.widget.RecyclerViewimport com.iyam.mycash.Rimport com.iyam.mycash.databinding.LayoutTransactionListItemBindingimport com.iyam.mycash.model.Transactionimport com.iyam.mycash.utils.ViewHolderBinderimport com.iyam.mycash.utils.formatDayOnlyimport com.iyam.mycash.utils.toCurrencyFormatclass TransactionAdapter(    private val context: Context,    private val onClick: (Transaction) -> Unit) : RecyclerView.Adapter<RecyclerView.ViewHolder>() {    private val differ = AsyncListDiffer(        this,        object : DiffUtil.ItemCallback<Transaction>() {            override fun areItemsTheSame(                oldItem: Transaction,                newItem: Transaction            ): Boolean {                return oldItem.sessionId == newItem.sessionId            }            override fun areContentsTheSame(                oldItem: Transaction,                newItem: Transaction            ): Boolean {                return oldItem.hashCode() == newItem.hashCode()            }        }    )    override fun onCreateViewHolder(        parent: ViewGroup,        viewType: Int    ): TransactionViewHolder {        val binding =            LayoutTransactionListItemBinding.inflate(                LayoutInflater.from(parent.context),                parent,                false            )        return TransactionViewHolder(            context,            binding,            onClick        )    }    override fun getItemCount(): Int {        return differ.currentList.size    }    override fun onBindViewHolder(        holder: RecyclerView.ViewHolder,        position: Int    ) {        (holder as ViewHolderBinder<Transaction>).bind(differ.currentList[position])    }    fun setData(data: List<Transaction>) {        differ.submitList(data)    }    class TransactionViewHolder(        private val context: Context,        private val binding: LayoutTransactionListItemBinding,        private val onClicked: (Transaction) -> Unit    ) : RecyclerView.ViewHolder(binding.root), ViewHolderBinder<Transaction> {        override fun bind(item: Transaction) {            val date = formatDayOnly(item.date.orEmpty())            binding.tvDate.text = date            val indonesianShift =                if (item.session?.shift == "MORNING") {                    context.getString(R.string.morning)                } else {                    context.getString(                        R.string.evening                    )                }            binding.tvShift.text = indonesianShift            binding.tvTransactionNumber.text = item.number.toString()            if (item.isVoided == true) {                binding.tvVoidedTransaction.isVisible = true            }            binding.tvRevenue.text = item.totalPrice?.toFloat()?.toCurrencyFormat()            binding.root.setOnClickListener {                onClicked.invoke(item)            }        }    }}